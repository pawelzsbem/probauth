<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Logowanie Firebase</title>

  <!-- Załadowanie głównej biblioteki Firebase (musi być pierwsza) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

  <script>
    // Konfiguracja projektu (skopiuj swoje dane z konsoli Firebase → Ustawienia projektu → Konfiguracja aplikacji → Web)
const firebaseConfig = {
  apiKey: "AIzaSyCvNcxTszFETySRcTnjMnKiEvMj2W7PXXE",
  authDomain: "probauth-14bf1.firebaseapp.com",
  projectId: "probauth-14bf1",
  storageBucket: "probauth-14bf1.firebasestorage.app",
  messagingSenderId: "759552787326",
  appId: "1:759552787326:web:f164fea99c2e7e048c292f"

};

    // Inicjalizacja połączenia z Twoim projektem Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
</head>

<body>
  <h1>Logowanie przez Google (Firebase Auth)</h1>

  <!-- Przycisk, który uruchomi logowanie -->
  <button id="loginBtn">Zaloguj przez Google</button>
  <button id="logoutBtn">Wyloguj</button>

  <!-- Miejsce, gdzie pokażemy dane użytkownika po zalogowaniu -->
  <div id="userInfo"></div>

  <script>
    // Pobranie modułu Authentication
    const auth = firebase.auth();

    // Utworzenie providera logowania przez Google
    const provider = new firebase.auth.GoogleAuthProvider();

    // Obsługa kliknięcia przycisku "Zaloguj przez Google"
    document.getElementById('loginBtn').addEventListener('click', () => {
      auth.signInWithPopup(provider) // Otwiera popup logowania Google
        .then(result => {
          // Jeśli logowanie się udało:
          const user = result.user;
          // Wyświetlamy imię i email w elemencie #userInfo
          document.getElementById('userInfo').innerHTML =
            `<p>Witaj, ${user.displayName} (${user.email})</p>`;
        })
        .catch(error => {
          // Obsługa błędu logowania
          console.error("Błąd logowania:", error);
        });
    });

      logoutBtn.addEventListener('click', async () => {
    try {
      await auth.signOut();                     // Wylogowanie
      userInfo.textContent = 'Nie zalogowany';  // Aktualizacja widoku
    } catch (e) {
      console.error(e);
      alert('Błąd wylogowania: ' + (e.message || e));
    }
  });
  </script>
</body>
</html>
